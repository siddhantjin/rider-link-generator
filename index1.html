<!DOCTYPE html>
<html>
<head>
  <title>Comeback Link Generator</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  <style>
    body { font-family: sans-serif; text-align: center; margin-top: 100px; }
    input, button { font-size: 18px; padding: 10px; }
    #qr { margin-top: 30px; }
    img { margin-top: 10px; width: 200px; height: 200px; }
  </style>
</head>
<body>
  <h2>Enter Your FE ID (e.g., FE99999)</h2>
  <input type="text" id="riderId" placeholder="FE99999" />
  <button onclick="generateQR()">Generate QR</button>
  <div id="qr"></div>

  <script>
    function generateQR() {
      const container = document.getElementById('qr');
      container.innerHTML = ""; // Clear previous

      const input = document.getElementById('riderId').value.trim().toUpperCase();

      if (input.startsWith("FE")) {
        const num = parseInt(input.substring(2));
        if (!isNaN(num)) {
          const finalId = num - 10000;
          const url = `https://zriderapp.onelink.me/Ud2g/3di4xgi0?id=${finalId}`;

          // Show link
          const link = document.createElement("p");
          link.innerHTML = `<a href="${url}" target="_blank">${url}</a>`;
          container.appendChild(link);

          // Generate QR as Data URL (image)
          QRCode.toDataURL(url, { width: 200 }, function (err, urlImg) {
            if (err) {
              container.innerHTML += "<p>Error generating QR code.</p>";
              return;
            }
            const img = document.createElement("img");
            img.src = urlImg;
            container.appendChild(img);
          });

          return;
        }
      }

      container.textContent = "Please enter a valid FE ID like FE99999.";
    }
  </script>
</body>
</html>
